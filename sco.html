<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- ç¶²é æ¨™é¡Œ -->
    <title>æ™ºæ…§å®¶æ—ï¼Eå­¸åŒè¡Œ - APPæ¨¡æ“¬å™¨</title>
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ Icon (Heroicons) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/heroicons/2.1.1/24/outline/hero-icons.min.css">
    
    <style>
        /* ä½¿ç”¨ Google Noto Sans å­—é«” (é‡å°ç¹é«”ä¸­æ–‡) */
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
        }
        /* ç”¨æ–¼è¼”åŠ©ä¿®æ­£å°åœ–ç¤ºçš„å°é½Š */
        .icon-fix {
             display: inline-block;
             vertical-align: text-bottom;
        }
        /* æ¨¡æ“¬æ‰‹æ©Ÿçš„å¤–æ¡† */
        .mobile-frame {
            width: 100%;
            max-width: 420px;
            height: 90vh; /* ä½”è¢å¹•é«˜åº¦çš„ 90% */
            max-height: 800px; /* æœ€å¤§é«˜åº¦ */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2), 0 0 0 12px rgba(30,30,30,0.9);
            border-radius: 40px; /* æ‰‹æ©Ÿå¤–æ¡†ç¶­æŒåœ“è§’ */
            overflow: hidden; /* éš±è—è¶…å‡ºæ¡†çš„å…§å®¹ */
            background-color: #f9fafb; /* APP é è¨­èƒŒæ™¯è‰² */
        }
        
        /* æƒæå‹•ç•«çš„ç·šæ¢ */
        .scan-line {
            position: absolute;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(to right, transparent, #10B981, transparent);
            box-shadow: 0 0 10px #10B981;
            animation: scan 2.5s linear infinite;
        }
        /* æƒæå‹•ç•«å½±æ ¼ */
        @keyframes scan {
            0% { top: 0; }
            100% { top: 100%; }
        }
        /* APP é é¢åŸºç¤æ¨£å¼ */
        .page {
            display: none; /* é è¨­éš±è— */
            width: 100%;
            height: 100%;
            flex-direction: column; /* å‚ç›´æ’ç‰ˆ */
        }
        /* ç•¶å‰é¡¯ç¤ºçš„é é¢ */
        .page.active {
            display: flex;
        }
    </style>
</head>
<body class="bg-gray-800 text-gray-800 flex items-center justify-center min-h-screen p-4">

    <!-- æ¨¡æ“¬æ‰‹æ©Ÿæ¡†æ¶ -->
    <div class="mobile-frame">
        <div class="w-full h-full flex flex-col" id="app-container">

            <!-- 
              ==============================================
              ç•«é¢ 1: ç™»å…¥ç•«é¢ (Login Page)
              ==============================================
            -->
            <div id="page-login" class="page active bg-white p-6 justify-between">
                <!-- é é¢å…§å®¹ (ç½®ä¸­) -->
                <div class="flex-grow flex flex-col items-center justify-center text-center">
                    <!-- Logo (æ¸›å°‘åœ“è§’) -->
                    <div class="w-24 h-24 bg-emerald-500 rounded-xl flex items-center justify-center shadow-lg mb-6">
                        <!-- æ»‘æ¿è»Šåœ–ç¤º -->
                        <svg class="w-12 h-12 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
                        </svg>
                    </div>
                    <!-- APP æ¨™é¡Œ -->
                    <h1 class="text-3xl font-bold text-gray-900">æ™ºæ…§å®¶æ—ï¼Eå­¸åŒè¡Œ</h1>
                    <p class="text-gray-500 mt-2">æ ¡åœ’ç§»å‹•ï¼Œä¸€ã€Œå—¶ã€å°±GOï¼</p>
                </div>
                <!-- é é¢åº•éƒ¨ (æŒ‰éˆ•) -->
                <div class="w-full">
                    <p class="text-center text-sm text-gray-400 mb-4">æœ¬æ¨¡æ“¬å™¨å°‡ä½¿ç”¨å­¸ç”Ÿå¸³è™Ÿç™»å…¥</p>
                    <!-- ç™»å…¥æŒ‰éˆ• (æ¸›å°‘åœ“è§’) -->
                    <button onclick="doLogin()" class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-3 px-4 rounded-lg shadow-lg transition duration-200 text-lg">
                        ä½¿ç”¨å­¸æ ¡Emailç™»å…¥
                    </button>
                </div>
            </div>

            <!-- 
              ==============================================
              ç•«é¢ 2: ä¸»åˆ—è¡¨ç•«é¢ (List Page)
              ==============================================
            -->
            <div id="page-map" class="page relative bg-gray-100">
                <!-- é ‚éƒ¨: æ ¡å€åˆ‡æ›å™¨ -->
                <div class="absolute top-0 left-0 right-0 p-4 z-10 bg-gray-100 shadow">
                    <!-- ä¸‹æ‹‰é¸å–® (æ¸›å°‘åœ“è§’) -->
                    <select id="campus-selector" onchange="changeCampus(this.value)" class="w-full p-3 rounded-md shadow-lg font-semibold text-lg border-none focus:ring-2 focus:ring-emerald-500">
                        <option value="å±å•†">å±å•†æ ¡å€</option>
                        <option value="æ°‘ç”Ÿ">æ°‘ç”Ÿæ ¡å€</option>
                        <option value="å±å¸«">å±å¸«æ ¡å€</option>
                    </select>
                </div>
                
                <!-- ä¸­é–“: æ¢åˆ—å¼ç«™é»åˆ—è¡¨ -->
                <div id="list-area" class="flex-grow mt-20 p-4 overflow-y-auto space-y-3">
                    <!-- ç«™é»åˆ—è¡¨å°‡ç”± JS å‹•æ…‹æ’å…¥é€™è£¡ -->
                </div>

                <!-- åº•éƒ¨: æƒç¢¼æŒ‰éˆ• -->
                <div class="absolute bottom-0 left-0 right-0 p-6 bg-white rounded-t-2xl shadow-[0_-10px_25px_rgba(0,0,0,0.05)]">
                    <!-- æƒç¢¼æŒ‰éˆ• (æ¸›å°‘åœ“è§’) -->
                    <button onclick="showPage('page-scan')" class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-4 px-6 rounded-lg shadow-lg transition duration-200 text-xl flex items-center justify-center">
                        <!-- QR Code åœ–ç¤º -->
                        <svg class="w-6 h-6 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 4.5a.75.75 0 00-.75.75v13.5c0 .414.336.75.75.75h13.5a.75.75 0 00.75-.75V5.25a.75.75 0 00-.75-.75H3.75zM9 15h.008v.008H9V15zm.008-3.008H9V12h.008v-.008zm3 3h.008v.008H12V15zm.008-3.008H12V12h.008v-.008zm3 3h.008v.008H15V15zm.008-3.008H15V12h.008v-.008z" />
                        </svg>
                        æƒç¢¼ç§Ÿå€Ÿ
                    </button>
                </div>

                <!-- å½ˆå‡ºè¦–çª—: ç«™é»è©³ç´°è³‡è¨Š (ç¶­æŒé ‚éƒ¨åœ“è§’) -->
                <div id="station-details-modal" class="hidden absolute bottom-0 left-0 right-0 p-6 bg-white rounded-t-2xl shadow-[0_-10px_25px_rgba(0,0,0,0.1)] z-20 transition-transform duration-300 translate-y-full">
                    <!-- é—œé–‰æŒ‰éˆ• -->
                    <button onclick="hideStationDetails()" class="absolute top-4 right-4 text-gray-400">
                        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                    
                    <!-- å½ˆçª—å…§å®¹ -->
                    <h2 id="modal-station-name" class="text-2xl font-bold mb-4">ç«™é»åç¨±</h2>
                    <!-- è³‡è¨Šå¡ (æ¸›å°‘åœ“è§’) -->
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div class="bg-emerald-50 p-4 rounded-md text-center">
                            <p class="text-sm font-medium text-emerald-700">å¯ç§Ÿå€Ÿè»Šè¼›</p>
                            <p id="modal-available" class="text-3xl font-bold text-emerald-600">5</p>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-md text-center">
                            <p class="text-sm font-medium text-blue-700">å¯æ­¸é‚„ç©ºä½</p>
                            <p id="modal-slots" class="text-3xl font-bold text-blue-600">12</p>
                        </div>
                    </div>
                    
                    <!-- æ­¥è¡Œæ™‚é–“ -->
                    <div>
                        <h3 class="font-semibold text-gray-600 mb-2">æ­¥è¡Œè‡³é™„è¿‘ç«™é»ï¼š</h3>
                        <div id="modal-walk-times" class="space-y-1 text-sm text-gray-500">
                            <!-- æ­¥è¡Œæ™‚é–“å°‡ç”± JS å‹•æ…‹æ’å…¥ -->
                        </div>
                    </div>
                </div>

            </div>

            <!-- 
              ==============================================
              ç•«é¢ 3: æƒæ QR Code (Scan Page)
              ==============================================
            -->
            <div id="page-scan" class="page bg-gray-900 text-white relative">
                <!-- è¿”å›æŒ‰éˆ• (ç¶­æŒåœ“å½¢) -->
                <button onclick="showPage('page-map')" class="absolute top-6 left-6 z-10 p-2 bg-black bg-opacity-30 rounded-full">
                    <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
                    </svg>
                </button>
                
                <!-- æƒæå€åŸŸ -->
                <div class="flex-grow flex flex-col items-center justify-center">
                    <p class="text-lg mb-4">è«‹å°æº–è»Šé¾é ­ä¸Šçš„ QR Code</p>
                    <!-- æƒææ¡† (æ¸›å°‘åœ“è§’) -->
                    <div class="w-64 h-64 bg-gray-700 rounded-md overflow-hidden relative">
                        <!-- æƒæå‹•ç•«ç·š -->
                        <div class="scan-line"></div>
                        <div class="absolute inset-0 border-4 border-white border-opacity-50"></div>
                    </div>
                </div>
                
                <!-- æ‰‹é›»ç­’æŒ‰éˆ• -->
                <div class="p-6 text-center">
                    <button class="text-gray-300 hover:text-white transition duration-200">
                        ğŸ”¦ é–‹å•Ÿæ‰‹é›»ç­’
                    </button>
                </div>
                
                <!-- æ¨¡æ“¬æƒæçš„è…³æœ¬ -->
                <script>
                    // ç›£è½æ­¤é é¢æ˜¯å¦è¢«é¡¯ç¤º
                    document.getElementById('page-scan').addEventListener('display', function() {
                        // ç•¶æ­¤é é¢é¡¯ç¤ºæ™‚ï¼Œæ¨¡æ“¬ä¸€å€‹ 2 ç§’çš„æƒæå»¶é²
                        setTimeout(() => {
                            // æª¢æŸ¥ç”¨æˆ¶æ˜¯å¦é‚„åœç•™åœ¨æƒæé  (é¿å…è·³é å¾Œæ‰è§¸ç™¼)
                            if (currentPage === 'page-scan') {
                                startRide(); // 2ç§’å¾Œè‡ªå‹•è·³è½‰åˆ°é¨ä¹˜ä¸­
                            }
                        }, 2000);
                    });
                </script>
            </div>

            <!-- 
              ==============================================
              ç•«é¢ 4: é¨ä¹˜ä¸­ (Riding Page)
              ==============================================
            -->
            <div id="page-riding" class="page flex-col">
                <!-- é ‚éƒ¨è³‡è¨Š -->
                <div class="p-6 bg-white shadow-md text-center">
                    <p class="text-sm text-gray-500">é¨ä¹˜æ™‚é–“</p>
                    <p id="ride-timer" class="text-5xl font-bold text-gray-900">00:00</p>
                    <p class="text-sm text-gray-500 mt-2">é ä¼°è²»ç”¨</p>
                    <p id="ride-cost" class="text-2xl font-semibold text-emerald-600">$ 10</p>
                </div>
                
                <!-- ç‹€æ…‹é¡¯ç¤º (å–ä»£åœ°åœ–) -->
                <div class="flex-grow bg-gray-100 p-4 flex flex-col items-center justify-center text-center">
                    <div class="w-20 h-20 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mb-6">
                        <!-- æ»‘æ¿è»Šåœ–ç¤º -->
                        <svg class="w-10 h-10" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M1 1.5A1.5 1.5 0 012.5 0h11.758a1.5 1.5 0 011.396 2.15l-2.612 5.223A1.5 1.5 0 0111.758 8H6.612a1.5 1.5 0 01-1.396-2.15L2.604 1.5zM3 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zM12 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3z" />
                            <path d="M3.193 14.632l-1.42 4.261A1.5 1.5 0 003.25 20h13.5a1.5 1.5 0 001.478-1.107l-1.42-4.261H3.192z" />
                        </svg>
                    </div>
                    <p class="text-2xl font-semibold text-gray-700">é¨ä¹˜ä¸­...</p>
                    <p class="text-gray-500 mt-2">ç¥æ‚¨æ—…é€”æ„‰å¿«ï¼</p>
                </div>
                
                <!-- åº•éƒ¨æŒ‰éˆ• -->
                <div class="p-6 bg-white rounded-t-2xl shadow-[0_-10px_25px_rgba(0,0,0,0.05)]">
                    <!-- çµæŸæŒ‰éˆ• (æ¸›å°‘åœ“è§’) -->
                    <button onclick="endRide()" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-4 px-6 rounded-lg shadow-lg transition duration-200 text-xl">
                        çµæŸé¨ä¹˜
                    </button>
                </div>
            </div>
            
            <!-- 
              ==============================================
              ç•«é¢ 5: é‚„è»Šç¸½çµ (Return Page)
              ==============================================
            -->
            <div id="page-returned" class="page bg-white p-6 justify-between">
                <!-- é é¢å…§å®¹ (ç½®ä¸­) -->
                <div class="flex-grow flex flex-col items-center justify-center text-center">
                    <!-- æˆåŠŸåœ–ç¤º (æ¸›å°‘åœ“è§’) -->
                    <div class="w-24 h-24 bg-emerald-100 rounded-xl flex items-center justify-center mb-6">
                        <svg class="w-12 h-12 text-emerald-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                        </svg>
                    </div>
                    <h1 class="text-3xl font-bold text-gray-900">é‚„è»ŠæˆåŠŸï¼</h1>
                    <p class="text-gray-500 mt-2">æ„Ÿè¬æ‚¨çš„ä½¿ç”¨</p>
                    
                    <!-- ç¸½çµå¡ (æ¸›å°‘åœ“è§’) -->
                    <div class="w-full bg-gray-50 rounded-md p-6 mt-8 text-left space-y-4">
                        <div>
                            <p class="text-sm text-gray-500">æœ¬æ¬¡é¨ä¹˜</p>
                            <p id="summary-time" class="text-2xl font-semibold">05:32</p>
                        </div>
                        <div>
                            <p class="text-sm text-gray-500">ç¸½å…±è²»ç”¨</p>
                            <p id="summary-cost" class="text-2xl font-semibold">$ 15</p>
                        </div>
                        <div>
                            <p class="text-sm text-gray-500">æ”¯ä»˜æ–¹å¼</p>
                            <p class="text-lg font-medium">å­¸ç”Ÿè­‰ (å·²æ‰£æ¬¾)</p>
                        </div>
                    </div>
                </div>
                <!-- é é¢åº•éƒ¨ (æŒ‰éˆ•) -->
                <div class="w-full">
                    <!-- è¿”å›æŒ‰éˆ• (æ¸›å°‘åœ“è§’) -->
                    <button onclick="showPage('page-map')" class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-3 px-4 rounded-lg shadow-lg transition duration-200 text-lg">
                        è¿”å›ä¸»ç•«é¢
                    </button>
                </div>
            </div>

        </div>
    </div>

    <script>
        // --- æ¨¡æ“¬è³‡æ–™åº« (ä½¿ç”¨æ‚¨æä¾›çš„ CSV ç«™é»åç¨±) ---
        const stationsData = {
            'å±å•†': {
                name: 'å±å•†æ ¡å€',
                stops: ['å…¥å£', 'æ´»å‹•ä¸­å¿ƒ', 'è¡Œæ”¿å¤§æ¨“', 'çƒå ´', 'äºŒé¤¨', 'ä¸€é¤¨', 'æ“å ´', 'å­¸é¤', 'åœ–è³‡å¤§æ¨“', 'ä¸€å®¿', 'äºŒå®¿']
            },
            'æ°‘ç”Ÿ': {
                name: 'æ°‘ç”Ÿæ ¡å€',
                stops: ['æ­£é–€', 'äº”è‚²æ¨“', 'äººæ–‡é¤¨', 'åŒ—å´æ©Ÿè»Š', 'çƒå ´', 'æ©Ÿè»Šå‡ºå£']
            },
            'å±å¸«': {
                name: 'å±å¸«æ ¡å€',
                stops: ['æ¸¸æ³³æ± ', 'æ“å ´', 'éŸ³æ¨‚é¤¨', 'ç¬¬ä¸‰åœè»Š']
            }
        };

        // --- APP å…¨åŸŸç‹€æ…‹ ---
        let currentPage = 'page-login'; // è¿½è¹¤ç›®å‰åœ¨å“ªå€‹é é¢
        let currentCampusKey = 'å±å•†'; // è¿½è¹¤ç›®å‰é¸æ“‡çš„æ ¡å€
        let rideTimerInterval; // ç”¨æ–¼å„²å­˜è¨ˆæ™‚å™¨
        let rideSeconds = 0; // é¨ä¹˜ç§’æ•¸
        let rideCost = 10; // èµ·å§‹è²»ç”¨

        // --- APP æ ¸å¿ƒåŠŸèƒ½ ---

        /**
         * é¡¯ç¤ºç‰¹å®š ID çš„é é¢, ä¸¦éš±è—å…¶ä»–é é¢
         * @param {string} pageId è¦é¡¯ç¤ºçš„é é¢ ID (ä¾‹å¦‚ 'page-login')
         */
        function showPage(pageId) {
            // éš±è—æ‰€æœ‰é é¢
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // é¡¯ç¤ºç›®æ¨™é é¢
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.classList.add('active');
                currentPage = pageId; // æ›´æ–°å…¨åŸŸç‹€æ…‹

                // è§¸ç™¼ä¸€å€‹è‡ªå®šç¾©çš„ 'display' äº‹ä»¶
                // (é€™æ˜¯çµ¦ 'page-scan' é é¢ç”¨ä¾†å•Ÿå‹•æ¨¡æ“¬æƒæçš„)
                const event = new Event('display');
                targetPage.dispatchEvent(event);
            }
            
            // å¦‚æœæ˜¯å›åˆ°ä¸»ç•«é¢(page-map)ï¼Œè¦ç¢ºä¿å½ˆå‡ºè¦–çª—æ˜¯é—œé–‰çš„
            if (pageId === 'page-map') {
                hideStationDetails();
            }
        }

        /**
         * æ¨¡æ“¬ç™»å…¥
         */
        function doLogin() {
            console.log("ç™»å…¥ä¸­...");
            // æ¨¡æ“¬ API å‘¼å«çš„å»¶é²
            setTimeout(() => {
                showPage('page-map'); // ç™»å…¥æˆåŠŸï¼Œè·³è½‰åˆ°ä¸»ç•«é¢
                changeCampus('å±å•†'); // é è¨­é¡¯ç¤ºå±å•†æ ¡å€çš„åˆ—è¡¨
            }, 500);
        }

        /**
         * åˆ‡æ›æ ¡å€ä¸¦æ›´æ–°ç«™é»åˆ—è¡¨
         * @param {string} campusKey æ ¡å€çš„ Key (ä¾‹å¦‚ 'å±å•†')
         */
        function changeCampus(campusKey) {
            console.log("åˆ‡æ›æ ¡å€è‡³:", campusKey);
            currentCampusKey = campusKey; // å„²å­˜ç›®å‰æ ¡å€
            const listArea = document.getElementById('list-area'); // æŠ“å–åˆ—è¡¨å®¹å™¨
            const campus = stationsData[campusKey]; // å¾è³‡æ–™åº«æ’ˆè³‡æ–™
            
            if (!campus) return; // é˜²å‘†

            // æ¸…ç©ºç›®å‰çš„åˆ—è¡¨
            listArea.innerHTML = '';

            // æ ¹æ“šè³‡æ–™åº«ä¸­çš„ç«™é»åç¨±ï¼Œå‹•æ…‹ç”¢ç”Ÿåˆ—è¡¨
            campus.stops.forEach(stopName => {
                // æ¨¡æ“¬å³æ™‚çš„è»Šè¼›èˆ‡ç©ºä½
                const available = Math.floor(Math.random() * 10);
                const slots = Math.floor(Math.random() * 15) + 5;
                
                const item = document.createElement('div');
                // åˆ—è¡¨é …ç›®çš„æ¨£å¼ (æ¸›å°‘åœ“è§’)
                item.className = 'bg-white p-4 rounded-lg shadow flex items-center justify-between cursor-pointer hover:bg-gray-50 transition duration-150';
                
                // åˆ—è¡¨é …ç›®çš„å…§å®¹ (HTML)
                item.innerHTML = `
                    <div class="flex items-center">
                        <!-- ç«™é»åœ–ç¤º (æ¸›å°‘åœ“è§’) -->
                        <div class="w-10 h-10 bg-emerald-100 text-emerald-600 rounded-lg flex items-center justify-center mr-4 flex-shrink-0">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
                                <path d="M1 1.5A1.5 1.5 0 012.5 0h11.758a1.5 1.5 0 011.396 2.15l-2.612 5.223A1.5 1.5 0 0111.758 8H6.612a1.5 1.5 0 01-1.396-2.15L2.604 1.5zM3 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zM12 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3z" />
                                <path d="M3.193 14.632l-1.42 4.261A1.5 1.5 0 003.25 20h13.5a1.5 1.5 0 001.478-1.107l-1.42-4.261H3.192z" />
                            </svg>
                        </div>
                        <!-- ç«™é»è³‡è¨Š -->
                        <div>
                            <p class="font-semibold text-lg text-gray-800">${stopName}</p>
                            <p class="text-sm text-gray-500">å¯ç§Ÿå€Ÿ: ${available} è¼› / å¯é‚„è»Š: ${slots} æ ¼</p>
                        </div>
                    </div>
                    <!-- å‘å³ç®­é ­ -->
                    <div class="text-gray-400">
                        <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                        </svg>
                    </div>
                `;
                
                // å¹«æ¯å€‹åˆ—è¡¨é …ç›®åŠ ä¸Šé»æ“Šäº‹ä»¶
                item.onclick = () => showStationDetails(stopName, available, slots, campusKey);
                
                // æŠŠç”¢ç”Ÿå¥½çš„é …ç›®åŠ åˆ°åˆ—è¡¨ä¸­
                listArea.appendChild(item);
            });
        }
        
        /**
         * é¡¯ç¤ºç«™é»è©³ç´°è³‡è¨Šçš„å½ˆå‡ºè¦–çª—
         */
        function showStationDetails(name, available, slots, campusKey) {
            // å¡«å…¥è³‡è¨Š
            document.getElementById('modal-station-name').innerText = name;
            document.getElementById('modal-available').innerText = available;
            document.getElementById('modal-slots').innerText = slots;
            
            // æ¨¡æ“¬æ­¥è¡Œæ™‚é–“ (éš¨æ©ŸæŠ“ 3 å€‹åŒæ ¡å€çš„å…¶ä»–ç«™é»)
            const walkTimesDiv = document.getElementById('modal-walk-times');
            walkTimesDiv.innerHTML = '';
            const otherStops = stationsData[campusKey].stops
                .filter(s => s !== name) // æ’é™¤è‡ªå·±
                .sort(() => 0.5 - Math.random()) // éš¨æ©Ÿæ’åº
                .slice(0, 3); // å– 3 å€‹
            
            if (otherStops.length === 0) {
                 walkTimesDiv.innerHTML = '<p>- é™„è¿‘ç„¡å…¶ä»–ç«™é» -</p>';
            } else {
                // é¡¯ç¤ºéš¨æ©Ÿçš„æ­¥è¡Œæ™‚é–“
                otherStops.forEach(stop => {
                    const timeMin = Math.floor(Math.random() * 5) + 1; // 1-5 åˆ†é˜
                    const timeSec = Math.floor(Math.random() * 60); // 0-59 ç§’
                    walkTimesDiv.innerHTML += `<p>- ${stop} (ç´„ ${timeMin}m ${timeSec}s)</p>`;
                });
            }

            // é¡¯ç¤ºå½ˆçª— (ä½¿ç”¨ CSS translate å¯¦ç¾æ»‘å…¥å‹•ç•«)
            const modal = document.getElementById('station-details-modal');
            modal.classList.remove('hidden', 'translate-y-full');
            modal.classList.add('translate-y-0');
        }

        /**
         * éš±è—ç«™é»è©³ç´°è³‡è¨Šçš„å½ˆå‡ºè¦–çª—
         */
        function hideStationDetails() {
            const modal = document.getElementById('station-details-modal');
            modal.classList.add('translate-y-full'); // æ»‘å‡º
            modal.classList.remove('translate-y-0');
            // ç­‰å¾…å‹•ç•«çµæŸå¾Œ (300ms) å†éš±è—(display: none)
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        /**
         * é–‹å§‹é¨ä¹˜ (å¾æƒæé è§¸ç™¼)
         */
        function startRide() {
            showPage('page-riding'); // è·³è½‰åˆ°é¨ä¹˜é 
            rideSeconds = 0; // é‡è¨­ç§’æ•¸
            rideCost = 10; // é‡è¨­èµ·è·³åƒ¹
            
            // æ›´æ–°ç•«é¢ä¸Šçš„è¨ˆæ™‚å™¨èˆ‡è²»ç”¨
            document.getElementById('ride-timer').innerText = "00:00";
            document.getElementById('ride-cost').innerText = `$ ${rideCost}`;
            
            // å•Ÿå‹•è¨ˆæ™‚å™¨ (æ¯ç§’åŸ·è¡Œä¸€æ¬¡)
            rideTimerInterval = setInterval(() => {
                rideSeconds++;
                
                // æ›´æ–°æ™‚é–“
                const minutes = Math.floor(rideSeconds / 60);
                const seconds = rideSeconds % 60;
                document.getElementById('ride-timer').innerText = 
                    `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                
                // æ¨¡æ“¬è¨ˆè²» (ä¾‹å¦‚: æ¯ 30 ç§’è·³ 1 å…ƒ)
                if (rideSeconds > 0 && rideSeconds % 30 === 0) {
                    rideCost += 1;
                    document.getElementById('ride-cost').innerText = `$ ${rideCost}`;
                }
                
            }, 1000);
        }

        /**
         * çµæŸé¨ä¹˜
         */
        function endRide() {
            clearInterval(rideTimerInterval); // åœæ­¢è¨ˆæ™‚å™¨
            
            // é¡¯ç¤ºç¸½çµç•«é¢
            document.getElementById('summary-time').innerText = document.getElementById('ride-timer').innerText;
            document.getElementById('summary-cost').innerText = `$ ${rideCost}`;
            
            showPage('page-returned'); // è·³è½‰åˆ°é‚„è»Šç¸½çµé 
        }

        // --- åˆå§‹å•Ÿå‹• ---
        // ç•¶ HTML æ–‡ä»¶è¼‰å…¥å®Œæˆæ™‚ï¼Œé è¨­é¡¯ç¤ºç™»å…¥é é¢
        document.addEventListener('DOMContentLoaded', () => {
            showPage('page-login');
        });

    </script>
</body>
</html>